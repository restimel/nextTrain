(function(t){function e(e){for(var r,i,u=e[0],s=e[1],c=e[2],d=0,p=[];d<u.length;d++)i=u[d],a[i]&&p.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);f&&f(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},a={app:0},o=[];function i(t){return u.p+"js/"+({about:"about"}[t]||t)+"."+{about:"052164b3"}[t]+".js"}function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(function(e,r){n=a[t]=[e,r]});e.push(n[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,u.nc&&s.setAttribute("nonce",u.nc),s.src=i(t),o=function(e){s.onerror=s.onload=null,clearTimeout(c);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+r+": "+o+")");i.type=r,i.request=o,n[1](i)}a[t]=void 0}};var c=setTimeout(function(){o({type:"timeout",target:s})},12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(e)},u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var f=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),a=n.n(r);a.a},"3a4e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var r=n("768b"),a=(n("386d"),n("28a5"),n("ac6a"),n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" |\n    "),n("router-link",{attrs:{to:"/about"}},[t._v("About")])],1)],1)},i=[],u=(n("034f"),n("2877")),s={},c=Object(u["a"])(s,o,i,!1,null,null,null),d=c.exports,f=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},t._l(t.departures,function(t){return n("Train",{key:t.display_informations.headsign,attrs:{departure:t}})}),1)},l=[],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"departure",class:t.status},[n("div",{style:t.codeColor},[t._v(t._s(t.line))]),n("div",[t._v(t._s(t.direction))]),n("div",[t._v(t._s(t.displayTime))])])},h=[],v=n("0a0d"),b=n.n(v),_=(n("a481"),{name:"train",props:{departure:Object},data:function(){return{}},computed:{codeColor:function(){var t=this.departure.display_informations.color;return"color:#".concat(t)},line:function(){var t=this.departure.display_informations.commercial_mode,e=this.departure.display_informations.label;return"".concat(t," ").concat(e)},direction:function(){return this.departure.display_informations.direction},time:function(){var t=this.departure.stop_date_time.departure_date_time,e=t.replace(/(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})/,"$1-$2-$3 $4:$5:$6"),n=new Date(e),r=Math.floor((n.getTime()-b()())/6e4);return r},displayTime:function(){return"".concat(this.time," min")},status:function(){var t=this.time;return t>0?"scheduled":0===t?"coming":"late"}}}),y=_,g=(n("8ec7"),Object(u["a"])(y,m,h,!1,null,"64c15bb0",null)),w=g.exports,x={name:"home",data:function(){return this.$store.dispatch("update"),{}},computed:{departures:function(){return this.$store.state.departures.slice(0,10)}},components:{Train:w}},T=x,j=(n("a93f"),Object(u["a"])(T,p,l,!1,null,"01eb2f1e",null)),O=j.exports;a["a"].use(f["a"]);var k=new f["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:O},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),$=(n("96cf"),n("3b8d")),C=n("2f62");n("9224");a["a"].use(C["a"]);var P=0,S=new C["a"].Store({state:{departures:[],context:{timezone:"Europe/Paris",current_datetime:""},token:"",station:"",refreshTime:3e4},mutations:{setState:function(t,e){var n=e.departures,r=e.context;t.departures=n,t.context=r},setConfiguration:function(t,e){var n=e.token,r=e.station,a=e.refreshTime;n&&(t.token=n),r&&(t.station=r),a=+a,!isNaN(a)&&a>0&&(t.refreshTime=a)}},actions:{update:function(){var t=Object($["a"])(regeneratorRuntime.mark(function t(e){var n,r,a,o,i,u,s,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.commit,r=e.dispatch,a=e.state,o=a.token,i=a.station,!o||!i){t.next=14;break}return u="https://api.sncf.com/v1/coverage/sncf/stop_areas/stop_area%3AOCE%3ASA%3A87386417/departures",t.next=6,fetch(u,{credentials:"same-origin",headers:{"Content-Type":"text/plain",Authorization:"Basic "+btoa(o)}});case 6:return s=t.sent,t.next=9,s.json();case 9:c=t.sent,n("setState",c),r("nextUpdate"),t.next=15;break;case 14:console.info("we cannot fetch data without token and station id");case 15:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),nextUpdate:function(t){var e=t.dispatch,n=t.state;clearTimeout(P);var r=n.refreshTime;P=setTimeout(function(){e("update")},r)}}});function E(){var t={};document.location.search.slice(1).split("&").forEach(function(e){var n=e.split("="),a=Object(r["a"])(n,2),o=a[0],i=a[1];t[o]=decodeURIComponent(i)}),S.commit("setConfiguration",t),S.dispatch("update")}a["a"].config.productionTip=!1,new a["a"]({router:k,store:S,render:function(t){return t(d)}}).$mount("#app"),E()},"64a9":function(t,e,n){},"8ec7":function(t,e,n){"use strict";var r=n("a30e"),a=n.n(r);a.a},9224:function(t){t.exports={a:"0.1.2"}},a30e:function(t,e,n){},a93f:function(t,e,n){"use strict";var r=n("3a4e"),a=n.n(r);a.a}});
//# sourceMappingURL=app.c64c3097.js.map